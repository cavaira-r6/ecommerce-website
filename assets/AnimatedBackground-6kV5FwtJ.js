import{r as l,j as n}from"./vendor-CLfIOXiu.js";import{u as c,C as f,F as m,E as g,G as y,B as x,V as v,D as u}from"./vendor_three-BC80Wlzl.js";const M=["models/8.glb","models/80.glb","models/9.glb","models/3.glb","models/5.glb","models/26.glb","models/33.glb","models/13.glb"],h=M.map(r=>`https://cavaira-r6.github.io/ecommerce-website/${r}`),b=24,j=async r=>{const i=[];return await Promise.all(r.map(async a=>{try{const t=await fetch(a,{method:"GET"});if(!t.ok){console.warn(`Model not found or server error for ${a} (status ${t.status})`);return}const s=t.headers.get("content-type")||"";if(s.includes("text/html")||s.includes("application/json")||s.includes("text/plain")){console.warn(`Skipping ${a} because content-type is ${s}`);return}i.push(a)}catch(t){console.warn(`Error fetching ${a}:`,t)}})),i};function I({url:r,scale:i=1}){const a=c(r),t=l.useMemo(()=>a?.scene?a.scene.clone(!0):new y,[a]);return l.useMemo(()=>{try{const s=new x().setFromObject(t),o=new v;s.getCenter(o),t.position.sub(o)}catch{}},[t]),l.useMemo(()=>{t.traverse(s=>{if(s.isMesh){const o=s;if(Array.isArray(o.material))o.material.forEach(e=>{e&&(e.side=u,e.roughness!==void 0&&(e.roughness=Math.max(0,e.roughness-.2)),e.emissiveIntensity!==void 0&&(e.emissiveIntensity=(e.emissiveIntensity||0)+.2),e.needsUpdate=!0)});else if(o.material){const e=o.material;e.side=u,e.roughness!==void 0&&(e.roughness=Math.max(0,e.roughness-.2)),e.emissiveIntensity!==void 0&&(e.emissiveIntensity=(e.emissiveIntensity||0)+.2),e.needsUpdate=!0}o.castShadow=!0,o.receiveShadow=!0}})},[t]),n.jsx("primitive",{object:t,scale:i})}function E({floatingModels:r}){return n.jsxs(n.Fragment,{children:[n.jsx("ambientLight",{intensity:.5}),n.jsx("hemisphereLight",{intensity:.6}),n.jsx("directionalLight",{position:[5,10,7],intensity:1}),n.jsx("pointLight",{position:[-10,-10,-10],intensity:.6}),r.map((i,a)=>n.jsx(m,{speed:i.speed,rotationIntensity:i.rotationIntensity,floatIntensity:i.floatIntensity,children:n.jsx("group",{position:i.position,children:n.jsx(I,{url:i.url,scale:i.scale})})},a)),n.jsx(g,{preset:"sunset",background:!1})]})}function F(){const[r,i]=l.useState(null);l.useEffect(()=>{let t=!0;return(async()=>{const s=await j(h);t&&i(s);try{c&&typeof c.preload=="function"&&(s.length?s:h).forEach(o=>c.preload(o))}catch{}})(),()=>{t=!1}},[]);const a=l.useMemo(()=>{const t=[],s=r&&r.length?r:[];if(!s.length)return t;const o=b;for(let e=0;e<o;e++){const p=s[e%s.length],d=40;t.push({url:p,position:[(Math.random()-.5)*d,Math.random()*8-2,(Math.random()-.5)*d],scale:.6+Math.random()*.8,speed:.4+Math.random()*1,rotationIntensity:.4+Math.random()*1.6,floatIntensity:.8+Math.random()*1.7})}return t},[r]);return n.jsxs(f,{camera:{position:[0,2,15],fov:50},dpr:[1,2],gl:{antialias:!0,alpha:!1},style:{position:"fixed",inset:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:-10},children:[n.jsx("color",{attach:"background",args:["#000000"]}),n.jsx("fog",{attach:"fog",args:["#000000",10,30]}),n.jsx(l.Suspense,{fallback:null,children:n.jsx(E,{floatingModels:a})})]})}export{F as default};
//# sourceMappingURL=AnimatedBackground-6kV5FwtJ.js.map
